<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>F1 Manager 2025 — Patrocínios</title>

  <style>
    :root{
      --bg:#05060a;
      --panel: rgba(15,18,35,.62);
      --panel2: rgba(10,12,25,.50);
      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.14);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.55);
      --brand:#22d3ee;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--txt);
      background: var(--bg);
      overflow:auto;
    }

    /* ===== Fundo AAA (com fallback) ===== */
    .bg{
      position:fixed; inset:0;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(34,211,238,.18), transparent 60%),
        radial-gradient(900px 600px at 80% 20%, rgba(99,102,241,.18), transparent 60%),
        radial-gradient(900px 700px at 55% 90%, rgba(16,185,129,.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.85));
      z-index:-3;
    }
    .bg::before{
      content:"";
      position:absolute; inset:0;
      background-image: url("assets/ui/patrocinio_bg.png");
      background-size: cover;
      background-position: center;
      filter: saturate(1.05) contrast(1.05) brightness(.8);
      opacity:.55;
      z-index:-2;
    }
    .bg::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.30), rgba(0,0,0,.88));
      z-index:-1;
    }

    /* ===== Layout ===== */
    .shell{
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px 16px 28px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px;
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(18,22,44,.72), rgba(10,12,24,.55));
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }

    .brand-left{
      display:flex; align-items:center; gap:12px;
      min-width: 240px;
    }

    .teamLogo{
      width:44px; height:44px;
      border-radius: 12px;
      background: rgba(255,255,255,.08);
      border:1px solid var(--stroke);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
    }
    .teamLogo img{width:100%; height:100%; object-fit:contain; padding:6px}

    .titles .h1{
      font-weight:800;
      letter-spacing:.6px;
      font-size: 16px;
      text-transform: uppercase;
      line-height: 1.05;
    }
    .titles .sub{
      margin-top:4px;
      font-size: 12px;
      color: var(--muted);
    }

    .manager{
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border:1px solid var(--stroke);
      border-radius: 999px;
      background: rgba(255,255,255,.06);
    }
    .manager img{
      width:30px; height:30px; border-radius:999px;
      border:1px solid var(--stroke2);
      object-fit:cover;
      background: rgba(255,255,255,.08);
    }
    .manager .nm{font-size:12px; font-weight:700}
    .manager .ct{font-size:11px; color:var(--muted2)}

    .btn{
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.07);
      color: var(--txt);
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 800;
      letter-spacing:.3px;
      cursor:pointer;
      transition: .16s ease;
      text-transform: uppercase;
      font-size: 12px;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.10)}
    .btn:active{transform: translateY(0px)}
    .btn.primary{
      background: linear-gradient(180deg, rgba(34,211,238,.22), rgba(34,211,238,.10));
      border-color: rgba(34,211,238,.35);
    }

    /* ===== Conteúdo ===== */
    .hero{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr}
      .brand-left{min-width:auto}
    }

    .panel{
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: var(--panel);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panelHeader{
      padding: 14px 16px;
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .panelHeader .t{
      font-weight:900;
      text-transform: uppercase;
      letter-spacing:.5px;
      font-size: 13px;
    }
    .panelHeader .d{
      margin-top: 4px;
      color: var(--muted);
      font-size: 12px;
      line-height:1.35;
    }
    .panelBody{padding: 14px 16px}

    .cards{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    @media (max-width: 980px){
      .cards{grid-template-columns: 1fr}
    }

    .card{
      border:1px solid var(--stroke);
      border-radius: 16px;
      background: rgba(0,0,0,.22);
      padding: 14px;
      min-height: 150px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      font-size: 11px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing:.4px;
      width: fit-content;
    }
    .card .title{
      font-weight: 900;
      font-size: 14px;
      margin-top: 6px;
    }
    .card .desc{
      color: var(--muted);
      font-size: 12px;
      line-height:1.35;
    }
    .card .meta{
      color: var(--muted2);
      font-size: 11px;
    }
    .rowBtn{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn.small{padding:9px 12px; font-size:11px}

    .kpiGrid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
    }
    @media (max-width: 980px){
      .kpiGrid{grid-template-columns: 1fr 1fr}
    }
    .kpi{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.05);
      padding: 10px 12px;
    }
    .kpi .k{font-size:11px; color:var(--muted2); text-transform: uppercase; letter-spacing:.4px; font-weight:800}
    .kpi .v{margin-top:6px; font-size:14px; font-weight:900}

    .lists{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    /* Conteúdo renderizado pelo sponsorSystem.js */
    #centralContracts, #activeContractsList, #offersList{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(0,0,0,.22);
      padding: 12px;
      min-height: 84px;
      overflow:auto;
    }

    /* Scrollbar (para não precisar TAB) */
    *::-webkit-scrollbar{height:10px;width:10px}
    *::-webkit-scrollbar-thumb{background: rgba(255,255,255,.18); border-radius: 999px}
    *::-webkit-scrollbar-track{background: rgba(255,255,255,.06)}

    .footerNote{
      margin-top: 12px;
      color: var(--muted2);
      font-size: 11px;
      line-height: 1.4;
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <div class="shell">
    <header class="topbar">
      <div class="brand-left">
        <div class="teamLogo" title="Equipe">
          <img id="teamLogoImg" alt="Logo da equipe" />
        </div>
        <div class="titles">
          <div class="h1">Patrocínios & Marca</div>
          <div class="sub">Negocie contratos, cumpra metas, aumente reputação e converta isso em performance real no carro.</div>
        </div>
      </div>

      <div style="display:flex; align-items:center; gap:10px;">
        <div class="manager" title="Manager atual">
          <img id="managerAvatar" alt="Manager" />
          <div>
            <div class="nm" id="managerName">Manager</div>
            <div class="ct" id="managerCountry">—</div>
          </div>
        </div>

        <button class="btn" id="btnVoltar">Voltar</button>
      </div>
    </header>

    <section class="hero">
      <div class="panel">
        <div class="panelHeader">
          <div>
            <div class="t">Painel de contratos</div>
            <div class="d">Os contratos geram caixa por GP e definem metas. Falhar reduz reputação e encerra contrato.</div>
          </div>
          <button class="btn primary small" id="sponsorMasterBtn">Ver ofertas</button>
        </div>
        <div class="panelBody">
          <div class="cards">
            <div class="card">
              <div>
                <div class="badge">Principal</div>
                <div class="title">Patrocinador Máster</div>
                <div class="desc">Maior valor. Metas agressivas ligadas a pódios, vitórias e posição no campeonato.</div>
                <div class="meta">Valor e exigências variam por reputação, exposição e nível da equipe.</div>
              </div>
              <div class="rowBtn">
                <button class="btn small primary" id="sponsorMasterBtn_2">Ver ofertas</button>
              </div>
            </div>

            <div class="card">
              <div>
                <div class="badge">Secundário</div>
                <div class="title">Apoiadores Oficiais</div>
                <div class="desc">Marcas para asas/sidpods/macacões. Metas moderadas e contratos mais estáveis.</div>
                <div class="meta">Slots disponíveis e custo de oportunidade dependem do seu marketing.</div>
              </div>
              <div class="rowBtn">
                <button class="btn small" id="sponsorSecondaryManageBtn">Gerenciar</button>
              </div>
            </div>

            <div class="card">
              <div>
                <div class="badge">Bônus</div>
                <div class="title">Patrocinadores Objetivo</div>
                <div class="desc">Pagam por volta rápida, pontos, top 10 e metas específicas. Alto risco, alto retorno.</div>
                <div class="meta">Oportunidades aumentam com performance e exposição em corridas.</div>
              </div>
              <div class="rowBtn">
                <button class="btn small primary" id="sponsorObjectiveCreateBtn">Criar / Assinar</button>
              </div>
            </div>
          </div>

          <div class="footerNote">
            Dica: Marketing e Reputação aumentam a qualidade das ofertas; desempenho em pista aumenta exposição e bônus.
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panelHeader">
          <div>
            <div class="t">Central (ativo)</div>
            <div class="d">Resumo do estado econômico e indicadores que afetam propostas.</div>
          </div>
        </div>
        <div class="panelBody">
          <!-- sponsorSystem.js escreve o painel aqui -->
          <div id="centralContracts"></div>
        </div>
      </div>
    </section>

    <section class="lists">
      <div class="panel">
        <div class="panelHeader">
          <div>
            <div class="t">Contratos ativos</div>
            <div class="d">Contratos em andamento, metas e risco de encerramento.</div>
          </div>
        </div>
        <div class="panelBody">
          <div id="activeContractsList"></div>
        </div>
      </div>

      <div class="panel">
        <div class="panelHeader">
          <div>
            <div class="t">Ofertas disponíveis</div>
            <div class="d">Gere e compare propostas de acordo com a sua reputação e nível da equipe.</div>
          </div>
        </div>
        <div class="panelBody">
          <div id="offersList"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- ===== Scripts (ordem importa) ===== -->
  <script src="data.js"></script>
  <script src="main.js"></script>
  <script src="sponsorSystem.js"></script>

  <script>
    // Back / Navegação
    (function(){
      const params = new URLSearchParams(location.search);
      const track = params.get("track") || "australia";
      const gp = params.get("gp") || "GP da Austrália 2025";
      const userTeam = (params.get("userTeam") || "ferrari").toLowerCase();

      // Logo equipe
      const teamLogo = document.getElementById("teamLogoImg");
      const map = {
        redbull:"assets/teams/redbull.png",
        ferrari:"assets/teams/ferrari.png",
        mclaren:"assets/teams/mclaren.png",
        mercedes:"assets/teams/mercedes.png",
        aston:"assets/teams/aston.png",
        alpine:"assets/teams/alpine.png",
        sauber:"assets/teams/sauber.png",
        williams:"assets/teams/williams.png",
        haas:"assets/teams/haas.png",
        racingbulls:"assets/teams/racingbulls.png"
      };
      teamLogo.src = map[userTeam] || "assets/ui/logo.png";

      // Manager (se existir no save)
      const st = JSON.parse(localStorage.getItem("f1m2025_save") || "{}");
      const m = st.manager || { name: "Manager", country: "—", avatar: "assets/ui/manager.png" };
      document.getElementById("managerName").textContent = m.name || "Manager";
      document.getElementById("managerCountry").textContent = m.country || "—";
      document.getElementById("managerAvatar").src = m.avatar || "assets/ui/manager.png";

      const back = document.getElementById("btnVoltar");
      back.addEventListener("click", ()=>{
        // volta para o lobby (ajuste se seu lobby tiver outro nome)
        location.href = `index.html?track=${encodeURIComponent(track)}&gp=${encodeURIComponent(gp)}&userTeam=${encodeURIComponent(userTeam)}`;
      });

      // garante botão duplicado master
      const b2 = document.getElementById("sponsorMasterBtn_2");
      const b1 = document.getElementById("sponsorMasterBtn");
      b2.addEventListener("click", ()=> b1.click());
    })();
  </script>
</body>
</html>
