/* ==========================
   F1 MANAGER 2025 – RACE UI
   Layout AAA (PC + Mobile)
   ========================== */

:root{
  --bg: #05070b;
  --glass: rgba(20, 26, 40, 0.62);
  --glass2: rgba(12, 16, 26, 0.72);
  --stroke: rgba(255,255,255,0.10);
  --stroke2: rgba(255,255,255,0.14);
  --text: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.65);

  --accent: #d6b44c;
  --good: #31c48d;
  --warn: #f4c542;

  --radius: 18px;
  --radius2: 14px;

  --topH: 74px;
  --footH: 74px;

  --gap: 14px;
  --pad: 14px;
}

*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
  overflow:hidden; /* importante: rolagens internas controladas */
}

/* Página em coluna: top -> main -> footer (sem cobrir pista) */
.race-page{
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* ========= TOPBAR ========= */
.topbar{
  height: var(--topH);
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap: 12px;
  padding: 10px 14px;
  background: linear-gradient(180deg, rgba(0,0,0,0.62), rgba(0,0,0,0.22));
  border-bottom: 1px solid var(--stroke);
}

.topbar-left .race-title{
  font-weight: 800;
  letter-spacing: 0.3px;
  font-size: 16px;
}
.topbar-left .race-sub{
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
}

.topbar-center{
  display:flex;
  align-items:center;
  gap: 14px;
}

.lap-head{
  text-align:center;
  min-width: 220px;
}
.lap-remaining{
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 1px;
}
.lap-current{
  margin-top: 2px;
  font-size: 16px;
  font-weight: 900;
  letter-spacing: 0.6px;
}

.speed-controls{
  display:flex;
  gap: 8px;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--stroke);
  border-radius: 999px;
  padding: 6px;
}
.speed-btn{
  border: 0;
  background: transparent;
  color: var(--text);
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 800;
  cursor:pointer;
}
.speed-btn:hover{
  background: rgba(255,255,255,0.08);
}

.topbar-right{
  display:flex;
  justify-content:flex-end;
}
.btn-pill{
  border: 1px solid var(--stroke2);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 10px 14px;
  border-radius: 999px;
  font-weight: 900;
  cursor:pointer;
}
.btn-pill:hover{
  background: rgba(255,255,255,0.10);
}

/* ========= MAIN LAYOUT ========= */
.layout{
  flex:1;
  min-height:0; /* permite scroll interno */
  padding: var(--pad);
  display:grid;
  grid-template-columns: 320px 1fr 360px;
  gap: var(--gap);
}

/* ========= PANELS ========= */
.panel{
  min-height:0; /* crucial para scroll interno funcionar */
  border-radius: var(--radius);
  background: var(--glass);
  border: 1px solid var(--stroke);
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  overflow:hidden;
  backdrop-filter: blur(10px);
}

.panel-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 12px 14px;
  background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.06));
  border-bottom: 1px solid var(--stroke);
}
.panel-title{
  font-weight: 900;
  letter-spacing: 0.8px;
  font-size: 13px;
  color: rgba(255,255,255,0.88);
}
.panel-meta{
  font-size: 12px;
  color: var(--muted);
}

.panel-body{
  padding: 12px 14px;
  min-height:0;
}

.scroll{
  overflow-y:auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}

/* ========= LEFT: Drivers list ========= */
.drivers-list{
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.driver-row{
  border-radius: 14px;
  padding: 10px 12px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
}

/* ========= CENTER: Map ========= */
.map-body{
  display:flex;
  flex-direction:column;
  height:100%;
  gap: 12px;
}
.track-container{
  flex:1;
  min-height: 0;
  border-radius: var(--radius2);
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.10);
  overflow:hidden;
  position:relative;
}

/* status chips (não cobrem o mapa, ficam abaixo) */
.track-status{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}
.status-chip{
  border-radius: 14px;
  padding: 10px 12px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
}
.status-label{
  font-size: 11px;
  color: var(--muted);
}
.status-value{
  margin-top: 2px;
  font-weight: 900;
  font-size: 13px;
}

/* ========= RIGHT: User cards ========= */
.user-grid{
  display:flex;
  flex-direction:column;
  gap: 12px;
}

.user-card{
  border-radius: var(--radius2);
  background: rgba(0,0,0,0.26);
  border: 1px solid rgba(255,255,255,0.10);
  padding: 12px;
}

.user-card-head{
  display:flex;
  gap: 10px;
  align-items:center;
}
.face{
  width: 48px;
  height: 48px;
  border-radius: 14px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.10);
  overflow:hidden;
}
.face img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}

.who-name{
  font-weight: 950;
  font-size: 14px;
}
.who-sub{
  margin-top: 2px;
  font-size: 11px;
  color: var(--muted);
}

.user-stats{
  margin-top: 10px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.stat-box{
  border-radius: 14px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 10px;
}
.stat-title{
  font-size: 11px;
  color: rgba(255,255,255,0.78);
  font-weight: 900;
}
.stat-row{
  margin-top: 6px;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap: 8px;
}
.stat-big{
  font-weight: 950;
  font-size: 14px;
}
.stat-tag{
  font-size: 11px;
  color: var(--muted);
}

.bar{
  margin-top: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.08);
  overflow:hidden;
  border: 1px solid rgba(255,255,255,0.10);
}
.bar-fill{
  height:100%;
  width: 50%;
  border-radius: 999px;
  background: var(--good);
}
.bar-yellow .bar-fill{ background: var(--warn); }

.btn-action{
  width:100%;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  font-weight: 950;
  letter-spacing: 0.4px;
  padding: 12px 12px;
  border-radius: 14px;
  cursor:pointer;
}
.btn-action:hover{
  background: rgba(255,255,255,0.10);
}

.btn-pit{
  margin-top: 10px;
  background: rgba(20, 160, 110, 0.20);
  border-color: rgba(49,196,141,0.45);
}
.btn-pit:hover{
  background: rgba(20, 160, 110, 0.28);
}

.controls-grid{
  margin-top: 10px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.btn-ers{
  grid-column: 1 / -1;
  background: rgba(214,180,76,0.14);
  border-color: rgba(214,180,76,0.40);
}
.btn-ers:hover{
  background: rgba(214,180,76,0.22);
}

/* ========= FOOTERBAR ========= */
.footerbar{
  height: var(--footH);
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  padding: 10px 14px;
  border-top: 1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.55));
}

.footer-left, .footer-right{
  display:flex;
  align-items:center;
  gap: 10px;
}
.footer-center{
  display:flex;
  align-items:center;
  gap: 12px;
}

.footer-btn{
  width: 46px;
  height: 46px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  font-size: 18px;
  cursor:pointer;
}
.footer-btn:hover{ background: rgba(255,255,255,0.10); }

.footer-btn.primary{
  border-color: rgba(214,180,76,0.40);
  background: rgba(214,180,76,0.14);
}
.footer-btn.primary:hover{
  background: rgba(214,180,76,0.22);
}

.footer-lap{
  min-width: 140px;
  text-align:center;
  font-weight: 950;
  letter-spacing: 0.6px;
}

/* ========= RESPONSIVO ========= */
@media (max-width: 1120px){
  .layout{
    grid-template-columns: 320px 1fr 340px;
  }
}

@media (max-width: 980px){
  :root{ --topH: 78px; --footH: 78px; }

  .layout{
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
  }

  .panel-left{ order: 2; }
  .panel-center{ order: 1; }
  .panel-right{ order: 3; }

  .topbar{
    grid-template-columns: 1fr;
    gap: 8px;
    height: auto;
    padding: 10px 12px;
  }
  .topbar-right{
    justify-content:flex-start;
  }
  .lap-head{
    min-width: 0;
  }
}

@media (max-width: 520px){
  .user-stats{
    grid-template-columns: 1fr;
  }
  .controls-grid{
    grid-template-columns: 1fr;
  }
  .btn-ers{
    grid-column: auto;
  }
}
